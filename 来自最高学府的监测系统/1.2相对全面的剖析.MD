## 1.2相对全面的剖析
康哥经过一段时间了解, 看到这个系统是一个原创性非常高的系统, 完整的系统是由Sensor, Gateway, Router, WSNTool,Collector, DB, WebApp等不同组件组成。

补充架构图

* Sensor 传感器, 在这个团队叫做无线智能传感器, 在手机通讯还是GPRS的时代, 团队几乎是首创发明了基于2.4GHz频道通讯的传感器, 这些传感器可以通过自组织的多跳网络汇集数据到附近的Gateway(网关)。
* Gateway 网关, 每一个网关可以接100~400米可视范围内的几十个不同指标类型的传感器, 当超过这个距离时或规模时, 可以使用中继设备扩展, 这些网关接受到数据后, 做授时打包,再通过内置的SIM卡提供的GPRS信号向Router发送数据。
* Router 硬件系统和软件系统之间的连接桥梁, 可以通过Router 设置允许接入网关的黑白名单, 接入成功后便会保存连接, 提供双向通行; 由于团队使用了私有的、特殊编码的协议, Router 还负责向下编码和向上解码工作。
* WSNTool 是基于Router的设备调试助手,通过明文日志的形式打印选中设备上报的数据, 同时提供下行的指令发送。这是一个传奇的工具, 不需要权限、只能跑在win上; 它就是软件工程师的噩梦, 每次版本迭代都有人想做重构他, 但他还是坚强稳定的工作了很多年, 和硬件打交道的工程师们都喜欢它、相信它。
* Router 除了和WSNTool 通信外, 还持续向Collector推送监测数据; Collector 就像它的名称定义一样, 收集着监测数据并保存到数据库中。它和Router一样古老, 但它很快被重构了, 具体原因之后会讲解的。
* 这个监测系统的DB用的是MongodDB, 这让我感觉非常棒, 我们团队后来还专门为结构监测设计了存储模型, 到现在我还是坚持认为MongoDB是非常适合做结构监测的时序数据库的。
* WebApp 是用Python的Django和模块化的js搭建的, 并通过supervisor来守护管理, 确保在不正常退出后可以被快速的重启。